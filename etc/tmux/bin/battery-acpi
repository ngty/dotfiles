#!/bin/bash

extract() {
  if [ "$1" = "+" ]; then
    for l in $(
      acpi -b | grep -v Unknown | \
        awk '{gsub(",",""); print $4 "(+" $5}' | \
          awk -F: '{print $1 ")"}'
          #awk -F: '{print $1 ":" $2 ")"}'
              ); do echo -n $l; done
  else
    for l in $(
      acpi -b | grep -v Unknown | \
        awk '{gsub(",",""); print $4 "(-" $5}' | \
          awk -F: '{print $1 ")"}'
          #awk -F: '{print $1 ":" $2 ")"}'
                ); do echo -n $l; done
  fi
}
 
if [ "$(acpi -a | awk '{print $3}' | tr [a-z] [A-Z])" == "ON-LINE" ]; then
  if [ "$(acpi -b | awk '{print $4}')" == "100%" ]; then
    echo -n "100%"
  else
    echo -n "$( extract '+' )"
  fi
else
  echo -n "$( extract '-' )"
fi
